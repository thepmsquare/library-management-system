(this["webpackJsonplibrary-management-system"]=this["webpackJsonplibrary-management-system"]||[]).push([[0],{101:function(e,n,t){},103:function(e,n,t){"use strict";t.r(n);var a=t(0),s=t.n(a),r=t(14),i=t.n(r),o=t(25),c=t(27),l=t(26),u=t(16),d=t(57);t(92),t(106),t(104);d.a.initializeApp({apiKey:"AIzaSyBBYCDggpHEho-sMOj_HxvgSC2wetbSUB8",authDomain:"library-management-syste-57f9f.firebaseapp.com",projectId:"library-management-syste-57f9f",storageBucket:"library-management-syste-57f9f.appspot.com",messagingSenderId:"659487115186",appId:"1:659487115186:web:4eed8326ab5cd4c63f86ab",measurementId:"G-LT3BJB781F"}),d.a.analytics();var h=d.a,b=t(74),g=t(107),m=t(146),j=t(139),f=t(145),p=t(140),O=t(148),v=t(141),C=t(55),y=t.n(C),k=(t(95),t(6)),x=h.firestore(),S=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(e){var a;return Object(o.a)(this,t),(a=n.call(this,e)).handleTabValueChange=function(e,n){a.setState((function(){return{tabValue:n}}))},a.handleInputChange=function(e){var n=e.target.getAttribute("name"),t=e.target.value;a.setState((function(){return Object(b.a)({},n,t)}))},a.handleSnackbarClose=function(){a.setState((function(){return{isSnackbarOpen:!1,snackbarMessage:""}}))},a.handleLoginSubmit=function(e){e.preventDefault(),h.auth().signInWithEmailAndPassword(a.state.loginEmail,a.state.loginPassword).catch((function(e){a.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},a.handleRegisterSubmit=function(e){e.preventDefault(),a.state.registerPassword===a.state.registerPasswordConfirm?""!==a.state.registerAdminKey?x.collection("AdminKeys").where("Keys","!=",[]).get().then((function(e){var n=[];e.forEach((function(e){return n.push(e.data())})),0!==n.length&&-1!==n[0].Keys.indexOf(a.state.registerAdminKey)?a.registerUser(!0):a.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Invalid Admin Keys"}}))})).catch((function(e){a.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))})):a.registerUser(!1):a.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Passwords do not match."}}))},a.registerUser=function(e){h.auth().createUserWithEmailAndPassword(a.state.registerEmail,a.state.registerPassword).then((function(n){n.user.updateProfile({displayName:a.state.registerUsername}).then((function(){x.collection("Users").doc(n.user.uid).set({isAdmin:e}).catch((function(e){a.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){a.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){a.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},a.render=function(){return Object(k.jsxs)("div",{className:"LoginRegister",children:[Object(k.jsxs)(g.a,{elevation:3,className:"LoginRegister-FormContainer",children:[Object(k.jsxs)(m.a,{value:a.state.tabValue,onChange:a.handleTabValueChange,children:[Object(k.jsx)(j.a,{label:"Login"}),Object(k.jsx)(j.a,{label:"Register"})]}),0===a.state.tabValue?Object(k.jsxs)("form",{onSubmit:a.handleLoginSubmit,className:"LoginRegister-Form",children:[Object(k.jsx)(f.a,{label:"Email",type:"email",required:!0,name:"loginEmail",value:a.state.loginEmail,onChange:a.handleInputChange}),Object(k.jsx)(f.a,{label:"Password",type:"password",required:!0,name:"loginPassword",value:a.state.loginPassword,onChange:a.handleInputChange}),Object(k.jsx)(p.a,{type:"submit",children:"Log In"})]}):Object(k.jsxs)("form",{onSubmit:a.handleRegisterSubmit,className:"LoginRegister-Form",children:[Object(k.jsx)(f.a,{label:"Username",required:!0,name:"registerUsername",value:a.state.registerUsername,onChange:a.handleInputChange}),Object(k.jsx)(f.a,{label:"Email",type:"email",required:!0,name:"registerEmail",value:a.state.registerEmail,onChange:a.handleInputChange}),Object(k.jsx)(f.a,{label:"Password",type:"password",required:!0,name:"registerPassword",value:a.state.registerPassword,onChange:a.handleInputChange}),Object(k.jsx)(f.a,{label:"Confirm Password",type:"password",required:!0,name:"registerPasswordConfirm",value:a.state.registerPasswordConfirm,onChange:a.handleInputChange}),Object(k.jsx)(f.a,{label:"Admin Key",name:"registerAdminKey",value:a.state.registerAdminKey,onChange:a.handleInputChange}),Object(k.jsx)(p.a,{type:"submit",children:"Register"})]})]}),Object(k.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a.state.isSnackbarOpen,autoHideDuration:6e3,onClose:a.handleSnackbarClose,message:a.state.snackbarMessage,action:Object(k.jsx)(s.a.Fragment,{children:Object(k.jsx)(v.a,{size:"small","aria-label":"close",color:"inherit",onClick:a.handleSnackbarClose,children:Object(k.jsx)(y.a,{fontSize:"small"})})})})]})},a.state={tabValue:0,loginEmail:"",loginPassword:"",registerUsername:"",registerEmail:"",registerPassword:"",registerPasswordConfirm:"",registerAdminKey:"",isSnackbarOpen:!1,snackbarMessage:""},a}return t}(a.Component),w=t(142),A=t(143),I=t(144),P=t(81),L=t(149),M=t(79),F=t.n(M),E=t(80),N=t.n(E),U=(t(101),function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(e){var a;return Object(o.a)(this,t),(a=n.call(this,e)).handleAccountMenuOpen=function(){a.setState((function(){return{isAccountMenuOpen:!0}}))},a.handleAccountMenuClose=function(){a.setState((function(){return{isAccountMenuOpen:!1}}))},a.handleChangeFocus=function(){a.props.handleChangeFocus("Profile")},a.render=function(){return Object(k.jsxs)(w.a,{position:"sticky",className:"Header",children:[Object(k.jsxs)(A.a,{className:"Header-Toolbar",children:[Object(k.jsx)(I.a,{variant:"h6",children:"Library Management System"}),Object(k.jsx)(v.a,{color:"inherit",onClick:a.handleAccountMenuOpen,className:"Header-AccountButton",children:Object(k.jsx)(F.a,{})})]}),Object(k.jsxs)(P.a,{anchorEl:document.querySelector(".Header-AccountButton"),keepMounted:!0,open:a.state.isAccountMenuOpen,onClose:a.handleAccountMenuClose,children:[Object(k.jsxs)(L.a,{children:[a.props.userIsAdmin?Object(k.jsx)(N.a,{className:"Header-AdminIcon"}):"",a.props.user.displayName]}),Object(k.jsx)(L.a,{onClick:a.handleChangeFocus,children:"Profile"}),Object(k.jsx)(L.a,{onClick:a.props.handleLogout,children:"Logout"})]})]})},a.state={isAccountMenuOpen:!1},a}return t}(a.Component)),B=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(){var e;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=n.call.apply(n,[this].concat(s))).handleChangeFocus=function(){e.props.handleChangeFocus("Library")},e.render=function(){return Object(k.jsx)("div",{className:"Profile",children:Object(k.jsx)(p.a,{onClick:e.handleChangeFocus,children:"Back to Library"})})},e}return t}(a.Component),K=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(){var e;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=n.call.apply(n,[this].concat(s))).render=function(){return Object(k.jsx)("div",{className:"Library",children:Object(k.jsx)("h1",{children:"Library"})})},e}return t}(a.Component),H=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(e){var a;return Object(o.a)(this,t),(a=n.call(this,e)).handleLogout=function(){h.auth().signOut()},a.handleSnackbarOpen=function(e){a.setState((function(){return{snackbarOpen:!0,snackbarMessage:e}}))},a.handleSnackbarClose=function(){a.setState((function(){return{snackbarOpen:!1,snackbarMessage:""}}))},a.handleChangeFocus=function(e){a.setState((function(){return{componentInFocus:e}}))},a.render=function(){return Object(k.jsxs)("div",{className:"Homepage",children:[Object(k.jsx)(U,{user:a.props.user,userIsAdmin:a.props.userIsAdmin,handleSnackbarOpen:a.handleSnackbarOpen,handleLogout:a.handleLogout,handleChangeFocus:a.handleChangeFocus}),"Library"===a.state.componentInFocus&&Object(k.jsx)(K,{}),"Profile"===a.state.componentInFocus&&Object(k.jsx)(B,{handleChangeFocus:a.handleChangeFocus}),Object(k.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a.state.snackbarOpen,autoHideDuration:6e3,onClose:a.handleSnackbarClose,message:a.state.snackbarMessage,action:Object(k.jsx)(s.a.Fragment,{children:Object(k.jsx)(v.a,{size:"small","aria-label":"close",color:"inherit",onClick:a.handleSnackbarClose,children:Object(k.jsx)(y.a,{fontSize:"small"})})})})]})},a.state={isSnackbarOpen:!1,snackbarMessage:"",componentInFocus:"Library"},a}return t}(a.Component),W=h.firestore(),R=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(e){var a;return Object(o.a)(this,t),(a=n.call(this,e)).componentDidMount=function(){a.checkLogin()},a.checkLogin=function(){h.auth().onAuthStateChanged((function(e){e?W.collection("Users").doc(e.uid).get().then((function(n){var t=n.data().isAdmin;a.setState((function(){return{user:e,userIsAdmin:t}}))})).catch((function(e){alert(e.message),h.auth().signOut()})):a.setState((function(){return{user:!1}}))}))},a.render=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{exact:!0,path:"/library-management-system/login",children:a.state.user?Object(k.jsx)(u.a,{to:{pathname:"/library-management-system"}}):Object(k.jsx)(S,{})}),Object(k.jsx)(u.b,{exact:!0,path:"/library-management-system",children:a.state.user?Object(k.jsx)(H,{user:a.state.user,userIsAdmin:a.state.userIsAdmin}):Object(k.jsx)(u.a,{to:{pathname:"/library-management-system/login"}})})]})})},a.state={user:!1,userIsAdmin:!1},a}return t}(a.Component),z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,150)).then((function(n){var t=n.getCLS,a=n.getFID,s=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),a(e),s(e),r(e),i(e)}))},q=t(65);i.a.render(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(q.a,{children:Object(k.jsx)(R,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/library-management-system",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/library-management-system","/service-worker.js");z?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):D(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):D(n,e)}))}}(),T()},95:function(e,n,t){}},[[103,1,2]]]);
//# sourceMappingURL=main.fac36eda.chunk.js.map