(this["webpackJsonplibrary-management-system"]=this["webpackJsonplibrary-management-system"]||[]).push([[0],{118:function(e,n,a){},124:function(e,n,a){},125:function(e,n,a){},127:function(e,n,a){},128:function(e,n,a){},129:function(e,n,a){},131:function(e,n,a){"use strict";a.r(n);var t=a(0),s=a.n(t),r=a(14),i=a.n(r),c=a(22),o=a(24),l=a(23),d=a(17),u=a(76);a(115),a(133),a(132);u.a.initializeApp({apiKey:"AIzaSyBBYCDggpHEho-sMOj_HxvgSC2wetbSUB8",authDomain:"library-management-syste-57f9f.firebaseapp.com",projectId:"library-management-syste-57f9f",storageBucket:"library-management-syste-57f9f.appspot.com",messagingSenderId:"659487115186",appId:"1:659487115186:web:4eed8326ab5cd4c63f86ab",measurementId:"G-LT3BJB781F"}),u.a.analytics();var h=u.a,p=a(36),b=a(101),m=a(194),j=a(171),g=a(193),f=a(174),O=a(195),x=a(134),C=a(35),y=a.n(C),S=(a(118),a(3)),v=h.firestore(),w=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).handleTabValueChange=function(e,n){t.setState((function(){return{tabValue:n}}))},t.handleInputChange=function(e){var n=e.target.getAttribute("name"),a=e.target.value;t.setState((function(){return Object(p.a)({},n,a)}))},t.handleSnackbarClose=function(){t.setState((function(){return{isSnackbarOpen:!1,snackbarMessage:""}}))},t.handleLoginSubmit=function(e){e.preventDefault(),h.auth().signInWithEmailAndPassword(t.state.loginEmail,t.state.loginPassword).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},t.handleRegisterSubmit=function(e){e.preventDefault(),t.state.registerPassword===t.state.registerPasswordConfirm?""!==t.state.registerAdminKey?v.collection("AdminKeys").where("Keys","!=",[]).get().then((function(e){var n=[];e.forEach((function(e){return n.push(e.data())})),0!==n.length&&-1!==n[0].Keys.indexOf(t.state.registerAdminKey)?t.registerUser(!0):t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Invalid Admin Key"}}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))})):t.registerUser(!1):t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Passwords do not match."}}))},t.registerUser=function(e){h.auth().createUserWithEmailAndPassword(t.state.registerEmail,t.state.registerPassword).then((function(n){n.user.updateProfile({displayName:t.state.registerUsername}).then((function(){v.collection("Users").doc(n.user.uid).set({isAdmin:e}).then((function(){n.user.sendEmailVerification().catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},t.handleForgotPassword=function(){t.state.loginEmail?h.auth().sendPasswordResetEmail(t.state.loginEmail).then((function(){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Password Reset Link sent at ".concat(t.state.loginEmail)}}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))})):t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Please enter your Email address."}}))},t.render=function(){return Object(S.jsxs)("div",{className:"LoginRegister",children:[Object(S.jsxs)(b.a,{elevation:3,className:"LoginRegister-FormContainer",children:[Object(S.jsxs)(m.a,{value:t.state.tabValue,onChange:t.handleTabValueChange,children:[Object(S.jsx)(j.a,{label:"Login"}),Object(S.jsx)(j.a,{label:"Register"})]}),0===t.state.tabValue?Object(S.jsxs)("form",{onSubmit:t.handleLoginSubmit,className:"LoginRegister-Form",children:[Object(S.jsx)(g.a,{label:"Email",type:"email",required:!0,name:"loginEmail",value:t.state.loginEmail,onChange:t.handleInputChange}),Object(S.jsx)(g.a,{label:"Password",type:"password",required:!0,name:"loginPassword",value:t.state.loginPassword,onChange:t.handleInputChange}),Object(S.jsx)(f.a,{type:"submit",children:"Log In"}),Object(S.jsx)(f.a,{size:"small",onClick:t.handleForgotPassword,children:"Forgot password?"})]}):Object(S.jsxs)("form",{onSubmit:t.handleRegisterSubmit,className:"LoginRegister-Form",children:[Object(S.jsx)(g.a,{label:"Username",required:!0,name:"registerUsername",value:t.state.registerUsername,onChange:t.handleInputChange}),Object(S.jsx)(g.a,{label:"Email",type:"email",required:!0,name:"registerEmail",value:t.state.registerEmail,onChange:t.handleInputChange}),Object(S.jsx)(g.a,{label:"Password",type:"password",required:!0,name:"registerPassword",value:t.state.registerPassword,onChange:t.handleInputChange}),Object(S.jsx)(g.a,{label:"Confirm Password",type:"password",required:!0,name:"registerPasswordConfirm",value:t.state.registerPasswordConfirm,onChange:t.handleInputChange}),Object(S.jsx)(g.a,{type:"password",label:"Admin Key",name:"registerAdminKey",value:t.state.registerAdminKey,onChange:t.handleInputChange}),Object(S.jsx)(f.a,{type:"submit",children:"Register"})]})]}),Object(S.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.state.isSnackbarOpen,autoHideDuration:6e3,onClose:t.handleSnackbarClose,message:t.state.snackbarMessage,action:Object(S.jsx)(s.a.Fragment,{children:Object(S.jsx)(x.a,{size:"small","aria-label":"close",color:"inherit",onClick:t.handleSnackbarClose,children:Object(S.jsx)(y.a,{fontSize:"small"})})})})]})},t.state={tabValue:0,loginEmail:"",loginPassword:"",registerUsername:"",registerEmail:"",registerPassword:"",registerPasswordConfirm:"",registerAdminKey:"",isSnackbarOpen:!1,snackbarMessage:""},t}return a}(t.Component),k=a(175),I=a(176),E=a(57),P=a(100),A=a(177),D=a(94),N=a.n(D),U=a(95),L=a.n(U),M=a(93),F=a.n(M),K=(a(124),function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).handleAccountMenuOpen=function(){t.setState((function(){return{isAccountMenuOpen:!0}}))},t.handleAccountMenuClose=function(){t.setState((function(){return{isAccountMenuOpen:!1}}))},t.handleChangeFocus=function(){t.props.handleChangeFocus("Profile"),t.handleAccountMenuClose()},t.render=function(){return Object(S.jsxs)(k.a,{position:"sticky",className:"Header",children:[Object(S.jsxs)(I.a,{className:"Header-Toolbar",children:[Object(S.jsxs)("div",{className:"Header-ToolbarLeft",children:[Object(S.jsx)(x.a,{color:"inherit",onClick:t.props.handleDrawerOpen,children:Object(S.jsx)(F.a,{})}),Object(S.jsx)(E.a,{variant:"h6",noWrap:!0,children:"Library Management System"})]}),Object(S.jsx)(x.a,{color:"inherit",onClick:t.handleAccountMenuOpen,className:"Header-AccountButton",children:Object(S.jsx)(N.a,{})})]}),Object(S.jsxs)(P.a,{anchorEl:document.querySelector(".Header-AccountButton"),keepMounted:!0,open:t.state.isAccountMenuOpen,onClose:t.handleAccountMenuClose,children:[Object(S.jsxs)(A.a,{children:[t.props.isUserAdmin?Object(S.jsx)(L.a,{className:"Header-AdminIcon"}):"",t.props.user.displayName]}),Object(S.jsx)(A.a,{onClick:t.handleChangeFocus,children:"Profile"}),Object(S.jsx)(A.a,{onClick:t.props.handleLogout,children:"Logout"})]})]})},t.state={isAccountMenuOpen:!1},t}return a}(t.Component)),T=a(196),q=a(178),B=a(179),R=a(51),W=a.n(R),V=a(96),H=a.n(V),Q=(a(125),h.firestore()),z=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).componentDidMount=function(){t.unSubAdminKeys=Q.collection("AdminKeys").where("Keys","!=",[]).onSnapshot((function(e){var n=[];e.forEach((function(e){return n.push(e.data())})),n[0]&&t.setState((function(){return{adminKey:n[0].Keys}}))}))},t.componentWillUnmount=function(){t.unSubAdminKeys()},t.handleChangeFocus=function(){t.props.handleChangeFocus("Library")},t.handleInputChange=function(e){var n=e.target.getAttribute("name"),a=e.target.value;t.setState((function(){return Object(p.a)({},n,a)}))},t.handleChangeDisplayNameExpandedToggle=function(e,n){t.setState((function(){return{isChangeDisplayNameExpanded:n}}))},t.handleChangeDisplayNameSubmit=function(e){e.preventDefault(),t.props.user.updateProfile({displayName:t.state.newUsername}).then((function(){t.setState((function(){return{newUsername:"",isChangeDisplayNameExpanded:!1}}),(function(){t.props.handleSnackbarOpen("Username Updated.")}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.handleChangeEmailExpandedToggle=function(e,n){t.setState((function(){return{isChangeEmailExpanded:n}}))},t.handleChangeEmailSubmit=function(e){e.preventDefault();var n=h.auth.EmailAuthProvider.credential(t.props.user.email,t.state.newEmailPassword);t.props.user.reauthenticateWithCredential(n).then((function(){t.props.user.updateEmail(t.state.newEmail).then((function(){t.props.user.sendEmailVerification().then((function(){t.setState((function(){return{newEmail:"",newPassword:"",isChangeEmailExpanded:!1}}),(function(){t.props.handleSnackbarOpen("Email Updated. Verify New Email Address."),window.location.reload()}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.handleChangePasswordExpandedToggle=function(e,n){t.setState((function(){return{isChangePasswordExpanded:n}}))},t.handleChangePasswordSubmit=function(e){if(e.preventDefault(),t.state.newPassword===t.state.newPasswordConfirm){var n=h.auth.EmailAuthProvider.credential(t.props.user.email,t.state.oldPassword);t.props.user.reauthenticateWithCredential(n).then((function(){t.props.user.updatePassword(t.state.newPassword).then((function(){t.setState((function(){return{oldPassword:"",newPassword:"",newPasswordConfirm:"",isChangePasswordExpanded:!1}}),(function(){t.props.handleSnackbarOpen("Password Updated.")}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))}else t.props.handleSnackbarOpen("New Passwords do not match.")},t.handleChangeAdminKeysExpandedToggle=function(e,n){t.setState((function(){return{isChangeAdminKeysExpanded:n}}))},t.handleChangeAdminKeysSubmit=function(e){e.preventDefault(),Q.collection("AdminKeys").where("Keys","!=",[]).get().then((function(e){var n=[];e.forEach((function(e){return n.push(e.ref)})),n[0]?n[0].update({Keys:t.state.newAdminKey}).then((function(){t.setState((function(){return{newAdminKey:"",isChangeAdminKeysExpanded:!1}}),(function(){t.props.handleSnackbarOpen("Updated AdminKey.")}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)})):t.props.handleSnackbarOpen("Error while fetching AdminKey.")})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.handleDeleteAccountExpandedToggle=function(e,n){t.setState((function(){return{isDeleteAccountExpanded:n}}))},t.handleDeleteAccountSubmit=function(e){e.preventDefault();var n=h.auth.EmailAuthProvider.credential(t.props.user.email,t.state.deletePassword);t.props.user.reauthenticateWithCredential(n).then((function(){Q.collection("Users").doc(t.props.user.uid).delete().then((function(){t.props.user.delete().catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.render=function(){return Object(S.jsxs)("div",{className:"Profile",children:[Object(S.jsx)("div",{className:"Profile-BackButtonContainer",children:Object(S.jsx)(f.a,{onClick:t.handleChangeFocus,children:"Back to Library"})}),Object(S.jsxs)("div",{children:[Object(S.jsxs)(T.a,{expanded:t.state.isChangeDisplayNameExpanded,onChange:t.handleChangeDisplayNameExpandedToggle,children:[Object(S.jsxs)(q.a,{expandIcon:t.state.isChangeDisplayNameExpanded?Object(S.jsx)(y.a,{}):Object(S.jsx)(W.a,{}),children:[Object(S.jsx)(E.a,{children:"Username"}),Object(S.jsx)(E.a,{children:t.props.user.displayName})]}),Object(S.jsx)(B.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleChangeDisplayNameSubmit,children:[Object(S.jsx)(g.a,{label:"New Username",name:"newUsername",value:t.state.newUsername,onChange:t.handleInputChange,required:!0}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})})]}),Object(S.jsxs)(T.a,{expanded:t.state.isChangeEmailExpanded,onChange:t.handleChangeEmailExpandedToggle,children:[Object(S.jsxs)(q.a,{expandIcon:t.state.isChangeEmailExpanded?Object(S.jsx)(y.a,{}):Object(S.jsx)(W.a,{}),children:[Object(S.jsx)(E.a,{children:"Email"}),Object(S.jsx)(E.a,{children:t.props.user.email})]}),Object(S.jsx)(B.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleChangeEmailSubmit,children:[Object(S.jsx)(g.a,{label:"New Email",name:"newEmail",value:t.state.newEmail,onChange:t.handleInputChange,required:!0}),Object(S.jsx)(g.a,{label:"Password",name:"newEmailPassword",value:t.state.newEmailPassword,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})})]}),Object(S.jsxs)(T.a,{expanded:t.state.isChangePasswordExpanded,onChange:t.handleChangePasswordExpandedToggle,children:[Object(S.jsx)(q.a,{expandIcon:t.state.isChangePasswordExpanded?Object(S.jsx)(y.a,{}):Object(S.jsx)(W.a,{}),children:Object(S.jsx)(E.a,{children:"Password"})}),Object(S.jsx)(B.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleChangePasswordSubmit,children:[Object(S.jsx)(g.a,{label:"Current Password",name:"oldPassword",value:t.state.oldPassword,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(g.a,{label:"New Password",name:"newPassword",value:t.state.newPassword,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(g.a,{label:"Confirm New Password",name:"newPasswordConfirm",value:t.state.newPasswordConfirm,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})})]}),t.props.isUserAdmin?Object(S.jsxs)(T.a,{expanded:t.state.isChangeAdminKeysExpanded,onChange:t.handleChangeAdminKeysExpandedToggle,children:[Object(S.jsxs)(q.a,{expandIcon:t.state.isChangeAdminKeysExpanded?Object(S.jsx)(y.a,{}):Object(S.jsx)(W.a,{}),children:[Object(S.jsx)(E.a,{children:"Admin Key"}),Object(S.jsx)(E.a,{children:t.state.adminKey})]}),Object(S.jsx)(B.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleChangeAdminKeysSubmit,children:[Object(S.jsx)(g.a,{label:"New Admin Key",name:"newAdminKey",value:t.state.newAdminKey,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})})]}):null,Object(S.jsxs)(T.a,{expanded:t.state.isDeleteAccountExpanded,onChange:t.handleDeleteAccountExpandedToggle,children:[Object(S.jsx)(q.a,{expandIcon:Object(S.jsx)(H.a,{}),children:Object(S.jsx)(E.a,{children:"Delete Account"})}),Object(S.jsx)(B.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleDeleteAccountSubmit,children:[Object(S.jsx)(g.a,{label:"Password",name:"deletePassword",value:t.state.deletePassword,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(f.a,{type:"submit",color:"secondary",children:"Delete Account"})]})})]})]})]})},t.state={isChangeDisplayNameExpanded:!1,newUsername:"",isChangeEmailExpanded:!1,newEmail:"",newEmailPassword:"",isChangePasswordExpanded:!1,oldPassword:"",newPassword:"",newPasswordConfirm:"",isChangeAdminKeysExpanded:!1,newAdminKey:"",isDeleteAccountExpanded:!1,deletePassword:"",adminKey:""},t}return a}(t.Component),J=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(e=n.call.apply(n,[this].concat(s))).render=function(){return Object(S.jsx)("div",{className:"Library",children:Object(S.jsx)("h1",{children:"Library"})})},e}return a}(t.Component),Y=a(197),_=a(173),G=a(135),$=a(180),X=a(181),Z=a(97),ee=a.n(Z),ne=a(98),ae=a.n(ne),te=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(e=n.call.apply(n,[this].concat(s))).handleInventoryClick=function(){e.props.handleChangeFocus("Inventory"),e.props.handleDrawerClose()},e.handleLibraryClick=function(){e.props.handleChangeFocus("Library"),e.props.handleDrawerClose()},e.render=function(){return Object(S.jsx)(Y.a,{anchor:"left",open:e.props.isDrawerOpen,onClose:e.props.handleDrawerClose,className:"Drawer",children:Object(S.jsxs)(_.a,{children:[e.props.isUserAdmin&&Object(S.jsxs)(G.a,{button:!0,onClick:e.handleInventoryClick,children:[Object(S.jsx)($.a,{children:Object(S.jsx)(ee.a,{})}),Object(S.jsx)(X.a,{primary:"Inventory"})]},"Inventory"),Object(S.jsxs)(G.a,{button:!0,onClick:e.handleLibraryClick,children:[Object(S.jsx)($.a,{children:Object(S.jsx)(ae.a,{})}),Object(S.jsx)(X.a,{primary:"Library"})]},"Library")]})})},e}return a}(t.Component),se=a(62),re=a.n(se),ie=a(81),ce=a(82),oe=a(182),le=a(183),de=a(184),ue=a(185),he=a(186),pe=a(187),be=a(188),me=a(189),je=a(190),ge=a(191),fe=a(192),Oe=a(99),xe=a.n(Oe),Ce=a.p+"static/media/defaultBook.3309b0ae.png",ye=(a(127),h.firestore()),Se=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).componentDidMount=function(){t.unsubInventoryListener=ye.collection("Inventory").onSnapshot((function(e){var n=[];e.forEach(function(){var e=Object(ce.a)(re.a.mark((function e(a){var s,r,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="https://www.googleapis.com/books/v1/volumes/"+a.data().id,e.prev=1,e.next=4,fetch(s);case 4:return r=e.sent,e.next=7,r.json();case 7:(i=e.sent)?(n.push(Object(ie.a)(Object(ie.a)({},i),{},{quantity:a.data().quantity,price:a.data().price})),t.setState((function(){return{inventory:n}}))):t.props.handleSnackbarOpen("Book Id not found."),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.props.handleSnackbarOpen(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}())}))},t.componentWillUnmount=function(){t.unsubInventoryListener()},t.handleInputChange=function(e){var n=e.target.getAttribute("name"),a=e.target.value;t.setState((function(){return Object(p.a)({},n,a)}))},t.toggleAddItem=function(){t.setState((function(e){return{addItem:!e.addItem}}))},t.handleSearchSubmit=function(){var e=Object(ce.a)(re.a.mark((function e(n){var a,s,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.state.searchTitle||t.state.searchAuthor||t.state.searchPublisher||t.state.searchISBN){e.next=5;break}t.props.handleSnackbarOpen("Please Enter at least 1 field."),e.next=24;break;case 5:return a="https://www.googleapis.com/books/v1/volumes?q=",t.state.searchTitle&&(a+="intitle:".concat(t.state.searchTitle)),t.state.searchAuthor&&(t.state.searchTitle?a+="+inauthor:".concat(t.state.searchAuthor):a+="inauthor:".concat(t.state.searchAuthor)),t.state.searchPublisher&&(t.state.searchTitle||t.state.searchAuthor?a+="+inpublisher:".concat(t.state.searchPublisher):a+="inpublisher:".concat(t.state.searchPublisher)),t.state.searchISBN&&(t.state.searchTitle||t.state.searchAuthor||t.state.searchPublisher?a+="+isbn:".concat(t.state.searchISBN):a+="isbn:".concat(t.state.searchISBN)),a+="&key=".concat("AIzaSyBBYCDggpHEho-sMOj_HxvgSC2wetbSUB8"),e.prev=11,e.next=14,fetch(a);case 14:return s=e.sent,e.next=17,s.json();case 17:(r=e.sent).items?t.setState((function(){return{searchResult:r.items}})):t.props.handleSnackbarOpen("No results found."),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(11),t.props.handleSnackbarOpen(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[11,21]])})));return function(n){return e.apply(this,arguments)}}(),t.handleDialogClose=function(){t.setState((function(){return{isAddDialogOpen:!1,isEditDialogOpen:!1}}))},t.handleAddItemDialogOpen=function(e){t.setState((function(){return{addId:e,isAddDialogOpen:!0}}))},t.handleAddSubmit=function(e){e.preventDefault(),ye.collection("Inventory").where("id","==",t.state.addId).get().then((function(e){var n=[];e.forEach((function(e){return n.push(e)})),n.length>0?t.props.handleSnackbarOpen("Duplicate Item."):ye.collection("Inventory").add({id:t.state.addId,quantity:t.state.addQuantity,price:t.state.addPrice}).then((function(){t.setState((function(){return{isAddDialogOpen:!1,addQuantity:"",addPrice:"",addId:"",addItem:!1,searchTitle:"",searchAuthor:"",searchPublisher:"",searchISBN:"",searchResult:[]}}),(function(){t.props.handleSnackbarOpen("Added to Inventory")}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.handleEditItemDialogOpen=function(e){t.setState((function(n){var a=n.inventory.find((function(n){return n.id===e})).quantity,t=n.inventory.find((function(n){return n.id===e})).price;return{editId:e,isEditDialogOpen:!0,editQuantity:a,editPrice:t}}))},t.handleEditSubmit=function(e){e.preventDefault(),console.log(t.state.editId),ye.collection("Inventory").where("id","==",t.state.editId).get().then((function(e){var n=[];e.forEach((function(e){return n.push(e.ref)})),n.length>0?n[0].update({quantity:t.state.editQuantity,price:t.state.editPrice}).then((function(){t.setState((function(){return{isEditDialogOpen:!1,editQuantity:"",editPrice:"",editId:""}}),(function(){t.props.handleSnackbarOpen("Updated Inventory")}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)})):t.props.handleSnackbarOpen("Unexpected Error.")})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.render=function(){return Object(S.jsxs)("div",{className:"Inventory",children:[Object(S.jsx)(E.a,{variant:"h3",children:"Inventory"}),Object(S.jsxs)(b.a,{className:"Inventory-AddItem",children:[Object(S.jsx)(f.a,{onClick:t.toggleAddItem,children:"Add Book"}),t.state.addItem&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("form",{onSubmit:t.handleSearchSubmit,className:"Inventory-AddItemForm",children:[Object(S.jsx)(E.a,{variant:"h4",children:"Search for a book"}),Object(S.jsx)(g.a,{label:"Title",name:"searchTitle",value:t.state.searchTitle,onChange:t.handleInputChange}),Object(S.jsx)(g.a,{label:"Author",name:"searchAuthor",value:t.state.searchAuthor,onChange:t.handleInputChange}),Object(S.jsx)(g.a,{label:"Publisher",name:"searchPublisher",value:t.state.searchPublisher,onChange:t.handleInputChange}),Object(S.jsx)(g.a,{label:"ISBN",InputProps:{inputProps:{pattern:"[0-9]{10}|[0-9]{13}"}},name:"searchISBN",value:t.state.searchISBN,onChange:t.handleInputChange}),Object(S.jsx)(f.a,{type:"submit",children:"Search"})]}),t.state.searchResult.length>0&&Object(S.jsxs)(oe.a,{component:b.a,children:[Object(S.jsxs)(le.a,{children:[Object(S.jsx)(de.a,{children:Object(S.jsxs)(ue.a,{children:[Object(S.jsx)(he.a,{}),Object(S.jsx)(he.a,{children:"Title"}),Object(S.jsx)(he.a,{children:"Authors"}),Object(S.jsx)(he.a,{children:"Publisher"}),Object(S.jsx)(he.a,{children:"Category"}),Object(S.jsx)(he.a,{children:"Published Date"}),Object(S.jsx)(he.a,{children:"Number of Pages"}),Object(S.jsx)(he.a,{})]})}),Object(S.jsx)(pe.a,{children:t.state.searchResult.map((function(e){return Object(S.jsxs)(ue.a,{children:[Object(S.jsx)(he.a,{children:Object(S.jsx)("img",{src:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:Ce,alt:e.title})}),Object(S.jsx)(he.a,{children:e.volumeInfo.title?e.volumeInfo.title:""}),Object(S.jsx)(he.a,{children:e.volumeInfo.authors?e.volumeInfo.authors.join(", "):""}),Object(S.jsx)(he.a,{children:e.volumeInfo.publisher?e.volumeInfo.publisher:""}),Object(S.jsx)(he.a,{children:e.volumeInfo.categories?e.volumeInfo.categories.join(", "):""}),Object(S.jsx)(he.a,{children:e.volumeInfo.publishedDate?e.volumeInfo.publishedDate:""}),Object(S.jsx)(he.a,{children:e.volumeInfo.pageCount?e.volumeInfo.pageCount:""}),Object(S.jsx)(he.a,{children:Object(S.jsx)(x.a,{onClick:function(){t.handleAddItemDialogOpen(e.id)},children:Object(S.jsx)(xe.a,{})})})]},e.id)}))})]}),Object(S.jsx)(E.a,{children:"Please search for specific terms if unable to find required book."})]})]})]}),t.state.inventory.length>0&&Object(S.jsx)(oe.a,{component:b.a,children:Object(S.jsxs)(le.a,{children:[Object(S.jsx)(de.a,{children:Object(S.jsxs)(ue.a,{children:[Object(S.jsx)(he.a,{}),Object(S.jsx)(he.a,{children:"Title"}),Object(S.jsx)(he.a,{children:"Authors"}),Object(S.jsx)(he.a,{children:"Publisher"}),Object(S.jsx)(he.a,{children:"Published Date"}),Object(S.jsx)(he.a,{children:"Price (\u20b9)"}),Object(S.jsx)(he.a,{children:"Quantity"}),Object(S.jsx)(he.a,{})]})}),Object(S.jsx)(pe.a,{children:t.state.inventory.map((function(e){return Object(S.jsxs)(ue.a,{children:[Object(S.jsx)(he.a,{children:Object(S.jsx)("img",{src:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:Ce,alt:e.title})}),Object(S.jsx)(he.a,{children:e.volumeInfo.title?e.volumeInfo.title:""}),Object(S.jsx)(he.a,{children:e.volumeInfo.authors?e.volumeInfo.authors.join(", "):""}),Object(S.jsx)(he.a,{children:e.volumeInfo.publisher?e.volumeInfo.publisher:""}),Object(S.jsx)(he.a,{children:e.volumeInfo.publishedDate?e.volumeInfo.publishedDate:""}),Object(S.jsx)(he.a,{children:e.price?e.price:""}),Object(S.jsx)(he.a,{children:e.quantity?e.quantity:""}),Object(S.jsx)(he.a,{children:Object(S.jsx)(x.a,{onClick:function(){t.handleEditItemDialogOpen(e.id)},children:Object(S.jsx)(W.a,{})})})]},e.id)}))})]})}),Object(S.jsx)(be.a,{open:t.state.isAddDialogOpen,onClose:t.handleDialogClose,children:Object(S.jsxs)("form",{onSubmit:t.handleAddSubmit,children:[Object(S.jsx)(me.a,{children:"Add to inventory"}),Object(S.jsxs)(je.a,{children:[Object(S.jsx)(ge.a,{children:t.state.isAddDialogOpen?t.state.searchResult.find((function(e){return e.id===t.state.addId})).volumeInfo.title:""}),Object(S.jsx)(g.a,{required:!0,type:"number",value:t.state.addQuantity,onChange:t.handleInputChange,name:"addQuantity",label:"Quantity",InputProps:{inputProps:{min:0}},fullWidth:!0}),Object(S.jsx)(g.a,{required:!0,type:"number",value:t.state.addPrice,onChange:t.handleInputChange,name:"addPrice",label:"Price (\u20b9)",InputProps:{inputProps:{min:0,step:"any"}},fullWidth:!0})]}),Object(S.jsxs)(fe.a,{children:[Object(S.jsx)(f.a,{onClick:t.handleDialogClose,color:"primary",children:"Cancel"}),Object(S.jsx)(f.a,{color:"primary",type:"submit",children:"Add"})]})]})}),Object(S.jsx)(be.a,{open:t.state.isEditDialogOpen,onClose:t.handleDialogClose,children:Object(S.jsxs)("form",{onSubmit:t.handleEditSubmit,children:[Object(S.jsx)(me.a,{children:"Edit inventory"}),Object(S.jsxs)(je.a,{children:[Object(S.jsx)(ge.a,{children:t.state.isEditDialogOpen?t.state.inventory.find((function(e){return e.id===t.state.editId})).volumeInfo.title:""}),Object(S.jsx)(g.a,{required:!0,type:"number",value:t.state.editQuantity,onChange:t.handleInputChange,name:"editQuantity",label:"Quantity",InputProps:{inputProps:{min:0}},fullWidth:!0}),Object(S.jsx)(g.a,{required:!0,type:"number",value:t.state.editPrice,onChange:t.handleInputChange,name:"editPrice",label:"Price (\u20b9)",InputProps:{inputProps:{min:0,step:"any"}},fullWidth:!0})]}),Object(S.jsxs)(fe.a,{children:[Object(S.jsx)(f.a,{onClick:t.handleDialogClose,color:"primary",children:"Cancel"}),Object(S.jsx)(f.a,{color:"primary",type:"submit",children:"Save"})]})]})})]})},t.state={addItem:!1,searchTitle:"",searchAuthor:"",searchPublisher:"",searchISBN:"",searchResult:[],isAddDialogOpen:!1,addId:"",addQuantity:"",addPrice:"",inventory:[],isEditDialogOpen:!1,editId:"",editQuantity:"",editPrice:""},t}return a}(t.Component),ve=(a(128),function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).handleLogout=function(){h.auth().signOut()},t.handleSnackbarOpen=function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e}}))},t.handleSnackbarClose=function(){t.setState((function(){return{isSnackbarOpen:!1,snackbarMessage:""}}))},t.handleChangeFocus=function(e){t.setState((function(){return{componentInFocus:e}}))},t.handleDrawerClose=function(){t.setState((function(){return{isDrawerOpen:!1}}))},t.handleDrawerOpen=function(){t.setState((function(){return{isDrawerOpen:!0}}))},t.render=function(){return Object(S.jsxs)("div",{className:"Homepage",children:[Object(S.jsx)(K,{user:t.props.user,isUserAdmin:t.props.isUserAdmin,handleSnackbarOpen:t.handleSnackbarOpen,handleLogout:t.handleLogout,handleChangeFocus:t.handleChangeFocus,handleDrawerOpen:t.handleDrawerOpen}),"Library"===t.state.componentInFocus&&Object(S.jsx)(J,{}),"Profile"===t.state.componentInFocus&&Object(S.jsx)(z,{handleChangeFocus:t.handleChangeFocus,user:t.props.user,isUserAdmin:t.props.isUserAdmin,handleSnackbarOpen:t.handleSnackbarOpen}),"Inventory"===t.state.componentInFocus&&Object(S.jsx)(Se,{handleSnackbarOpen:t.handleSnackbarOpen}),Object(S.jsx)(te,{isDrawerOpen:t.state.isDrawerOpen,handleDrawerClose:t.handleDrawerClose,isUserAdmin:t.props.isUserAdmin,handleChangeFocus:t.handleChangeFocus}),Object(S.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.state.isSnackbarOpen,autoHideDuration:6e3,onClose:t.handleSnackbarClose,message:t.state.snackbarMessage,action:Object(S.jsx)(s.a.Fragment,{children:Object(S.jsx)(x.a,{size:"small","aria-label":"close",color:"inherit",onClick:t.handleSnackbarClose,children:Object(S.jsx)(y.a,{fontSize:"small"})})})})]})},t.state={isSnackbarOpen:!1,snackbarMessage:"",componentInFocus:"Library",isDrawerOpen:!1},t}return a}(t.Component)),we=(a(129),function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).handleSnackbarClose=function(){t.setState((function(){return{isSnackbarOpen:!1,snackbarMessage:""}}))},t.handleLogout=function(){h.auth().signOut()},t.handleReload=function(){window.location.reload()},t.handleResend=function(){t.props.user.sendEmailVerification().then((function(){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Email Resent to ".concat(t.props.user.email,".")}}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},t.handleEmailChangeToggle=function(){t.setState((function(e){return{isUserChangingEmail:!e.isUserChangingEmail}}))},t.handleInputChange=function(e){var n=e.target.getAttribute("name"),a=e.target.value;t.setState((function(){return Object(p.a)({},n,a)}))},t.handleEmailChangeSubmit=function(e){e.preventDefault();var n=h.auth.EmailAuthProvider.credential(t.props.user.email,t.state.passwordInput);t.props.user.reauthenticateWithCredential(n).then((function(){t.props.user.updateEmail(t.state.newEmailInput).then((function(){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Email changed to ".concat(t.state.newEmailInput),isUserChangingEmail:!1,newEmailInput:"",passwordInput:""}}),(function(){t.props.user.reload()}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},t.render=function(){return Object(S.jsxs)("div",{className:"VerifyEmail",children:[Object(S.jsxs)(E.a,{children:[t.props.user.displayName,", please Verify Email at"," ",t.props.user.email,"."]}),Object(S.jsx)(f.a,{onClick:t.handleResend,children:"Resend Email"}),Object(S.jsx)(f.a,{onClick:t.handleReload,children:"Already Verified?"}),Object(S.jsx)(f.a,{onClick:t.handleEmailChangeToggle,children:"Change Email Address"}),t.state.isUserChangingEmail?Object(S.jsx)(b.a,{className:"VerifyEmail-FormContainer",children:Object(S.jsxs)("form",{onSubmit:t.handleEmailChangeSubmit,className:"VerifyEmail-Form",children:[Object(S.jsx)(g.a,{label:"New Email Address",type:"email",required:!0,name:"newEmailInput",value:t.state.newEmailInput,onChange:t.handleInputChange}),Object(S.jsx)(g.a,{label:"Password",type:"password",required:!0,name:"passwordInput",value:t.state.passwordInput,onChange:t.handleInputChange}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})}):null,Object(S.jsx)(f.a,{color:"secondary",onClick:t.handleLogout,children:"Logout"}),Object(S.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.state.isSnackbarOpen,autoHideDuration:6e3,onClose:t.handleSnackbarClose,message:t.state.snackbarMessage,action:Object(S.jsx)(s.a.Fragment,{children:Object(S.jsx)(x.a,{size:"small","aria-label":"close",color:"inherit",onClick:t.handleSnackbarClose,children:Object(S.jsx)(y.a,{fontSize:"small"})})})})]})},t.state={isSnackbarOpen:!1,snackbarMessage:"",isUserChangingEmail:!1,newEmailInput:"",passwordInput:""},t}return a}(t.Component)),ke=h.firestore(),Ie=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).componentDidMount=function(){t.checkLogin()},t.checkLogin=function(){h.auth().onAuthStateChanged((function(e){e?ke.collection("Users").doc(e.uid).get().then((function(n){var a=!!n.data()&&n.data().isAdmin;t.setState((function(){return{user:e,isUserAdmin:a}}))})).catch((function(e){alert(e.message),h.auth().signOut()})):t.setState((function(){return{user:!1}}))}))},t.render=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)(d.d,{children:[Object(S.jsx)(d.b,{exact:!0,path:"/library-management-system/login",children:t.state.user?Object(S.jsx)(d.a,{to:{pathname:"/library-management-system"}}):Object(S.jsx)(w,{})}),Object(S.jsx)(d.b,{exact:!0,path:"/library-management-system",children:t.state.user?t.state.user.emailVerified?Object(S.jsx)(ve,{user:t.state.user,isUserAdmin:t.state.isUserAdmin}):Object(S.jsx)(we,{user:t.state.user}):Object(S.jsx)(d.a,{to:{pathname:"/library-management-system/login"}})})]})})},t.state={user:!1,isUserAdmin:!1},t}return a}(t.Component),Ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pe(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,198)).then((function(n){var a=n.getCLS,t=n.getFID,s=n.getFCP,r=n.getLCP,i=n.getTTFB;a(e),t(e),s(e),r(e),i(e)}))},De=a(80);i.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(De.a,{children:Object(S.jsx)(Ie,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/library-management-system",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/library-management-system","/service-worker.js");Ee?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var t=a.headers.get("content-type");404===a.status||null!=t&&-1===t.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Pe(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Pe(n,e)}))}}(),Ae()}},[[131,1,2]]]);
//# sourceMappingURL=main.c9c0c999.chunk.js.map