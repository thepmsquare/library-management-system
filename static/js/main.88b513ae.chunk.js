(this["webpackJsonplibrary-management-system"]=this["webpackJsonplibrary-management-system"]||[]).push([[0],{100:function(e,n,a){},106:function(e,n,a){},107:function(e,n,a){},108:function(e,n,a){},109:function(e,n,a){},111:function(e,n,a){"use strict";a.r(n);var t=a(0),s=a.n(t),r=a(14),i=a.n(r),c=a(24),o=a(26),l=a(25),d=a(16),u=a(68);a(97),a(113),a(112);u.a.initializeApp({apiKey:"AIzaSyBBYCDggpHEho-sMOj_HxvgSC2wetbSUB8",authDomain:"library-management-syste-57f9f.firebaseapp.com",projectId:"library-management-syste-57f9f",storageBucket:"library-management-syste-57f9f.appspot.com",messagingSenderId:"659487115186",appId:"1:659487115186:web:4eed8326ab5cd4c63f86ab",measurementId:"G-LT3BJB781F"}),u.a.analytics();var h=u.a,m=a(46),p=a(114),b=a(159),g=a(150),j=a(158),f=a(152),O=a(160),x=a(115),w=a(31),C=a.n(w),S=(a(100),a(3)),y=h.firestore(),k=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).handleTabValueChange=function(e,n){t.setState((function(){return{tabValue:n}}))},t.handleInputChange=function(e){var n=e.target.getAttribute("name"),a=e.target.value;t.setState((function(){return Object(m.a)({},n,a)}))},t.handleSnackbarClose=function(){t.setState((function(){return{isSnackbarOpen:!1,snackbarMessage:""}}))},t.handleLoginSubmit=function(e){e.preventDefault(),h.auth().signInWithEmailAndPassword(t.state.loginEmail,t.state.loginPassword).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},t.handleRegisterSubmit=function(e){e.preventDefault(),t.state.registerPassword===t.state.registerPasswordConfirm?""!==t.state.registerAdminKey?y.collection("AdminKeys").where("Keys","!=",[]).get().then((function(e){var n=[];e.forEach((function(e){return n.push(e.data())})),0!==n.length&&-1!==n[0].Keys.indexOf(t.state.registerAdminKey)?t.registerUser(!0):t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Invalid Admin Key"}}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))})):t.registerUser(!1):t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Passwords do not match."}}))},t.registerUser=function(e){h.auth().createUserWithEmailAndPassword(t.state.registerEmail,t.state.registerPassword).then((function(n){n.user.updateProfile({displayName:t.state.registerUsername}).then((function(){y.collection("Users").doc(n.user.uid).set({isAdmin:e}).then((function(){n.user.sendEmailVerification().catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},t.handleForgotPassword=function(){t.state.loginEmail?h.auth().sendPasswordResetEmail(t.state.loginEmail).then((function(){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Password Reset Link sent at ".concat(t.state.loginEmail)}}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))})):t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Please enter your Email address."}}))},t.render=function(){return Object(S.jsxs)("div",{className:"LoginRegister",children:[Object(S.jsxs)(p.a,{elevation:3,className:"LoginRegister-FormContainer",children:[Object(S.jsxs)(b.a,{value:t.state.tabValue,onChange:t.handleTabValueChange,children:[Object(S.jsx)(g.a,{label:"Login"}),Object(S.jsx)(g.a,{label:"Register"})]}),0===t.state.tabValue?Object(S.jsxs)("form",{onSubmit:t.handleLoginSubmit,className:"LoginRegister-Form",children:[Object(S.jsx)(j.a,{label:"Email",type:"email",required:!0,name:"loginEmail",value:t.state.loginEmail,onChange:t.handleInputChange}),Object(S.jsx)(j.a,{label:"Password",type:"password",required:!0,name:"loginPassword",value:t.state.loginPassword,onChange:t.handleInputChange}),Object(S.jsx)(f.a,{type:"submit",children:"Log In"}),Object(S.jsx)(f.a,{size:"small",onClick:t.handleForgotPassword,children:"Forgot password?"})]}):Object(S.jsxs)("form",{onSubmit:t.handleRegisterSubmit,className:"LoginRegister-Form",children:[Object(S.jsx)(j.a,{label:"Username",required:!0,name:"registerUsername",value:t.state.registerUsername,onChange:t.handleInputChange}),Object(S.jsx)(j.a,{label:"Email",type:"email",required:!0,name:"registerEmail",value:t.state.registerEmail,onChange:t.handleInputChange}),Object(S.jsx)(j.a,{label:"Password",type:"password",required:!0,name:"registerPassword",value:t.state.registerPassword,onChange:t.handleInputChange}),Object(S.jsx)(j.a,{label:"Confirm Password",type:"password",required:!0,name:"registerPasswordConfirm",value:t.state.registerPasswordConfirm,onChange:t.handleInputChange}),Object(S.jsx)(j.a,{type:"password",label:"Admin Key",name:"registerAdminKey",value:t.state.registerAdminKey,onChange:t.handleInputChange}),Object(S.jsx)(f.a,{type:"submit",children:"Register"})]})]}),Object(S.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.state.isSnackbarOpen,autoHideDuration:6e3,onClose:t.handleSnackbarClose,message:t.state.snackbarMessage,action:Object(S.jsx)(s.a.Fragment,{children:Object(S.jsx)(x.a,{size:"small","aria-label":"close",color:"inherit",onClick:t.handleSnackbarClose,children:Object(S.jsx)(C.a,{fontSize:"small"})})})})]})},t.state={tabValue:0,loginEmail:"",loginPassword:"",registerUsername:"",registerEmail:"",registerPassword:"",registerPasswordConfirm:"",registerAdminKey:"",isSnackbarOpen:!1,snackbarMessage:""},t}return a}(t.Component),E=a(153),v=a(154),A=a(155),P=a(87),I=a(162),N=a(84),M=a.n(N),K=a(85),F=a.n(K),D=(a(106),function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).handleAccountMenuOpen=function(){t.setState((function(){return{isAccountMenuOpen:!0}}))},t.handleAccountMenuClose=function(){t.setState((function(){return{isAccountMenuOpen:!1}}))},t.handleChangeFocus=function(){t.props.handleChangeFocus("Profile"),t.handleAccountMenuClose()},t.render=function(){return Object(S.jsxs)(E.a,{position:"sticky",className:"Header",children:[Object(S.jsxs)(v.a,{className:"Header-Toolbar",children:[Object(S.jsx)(A.a,{variant:"h6",children:"Library Management System"}),Object(S.jsx)(x.a,{color:"inherit",onClick:t.handleAccountMenuOpen,className:"Header-AccountButton",children:Object(S.jsx)(M.a,{})})]}),Object(S.jsxs)(P.a,{anchorEl:document.querySelector(".Header-AccountButton"),keepMounted:!0,open:t.state.isAccountMenuOpen,onClose:t.handleAccountMenuClose,children:[Object(S.jsxs)(I.a,{children:[t.props.userIsAdmin?Object(S.jsx)(F.a,{className:"Header-AdminIcon"}):"",t.props.user.displayName]}),Object(S.jsx)(I.a,{onClick:t.handleChangeFocus,children:"Profile"}),Object(S.jsx)(I.a,{onClick:t.props.handleLogout,children:"Logout"})]})]})},t.state={isAccountMenuOpen:!1},t}return a}(t.Component)),U=a(161),L=a(156),T=a(157),q=a(57),R=a.n(q),V=a(86),W=a.n(V),B=(a(107),h.firestore()),z=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).componentDidMount=function(){t.unSubAdminKeys=B.collection("AdminKeys").where("Keys","!=",[]).onSnapshot((function(e){var n=[];e.forEach((function(e){return n.push(e.data())})),n[0]&&t.setState((function(){return{adminKey:n[0].Keys}}))}))},t.componentWillUnmount=function(){t.unSubAdminKeys()},t.handleChangeFocus=function(){t.props.handleChangeFocus("Library")},t.handleInputChange=function(e){var n=e.target.getAttribute("name"),a=e.target.value;t.setState((function(){return Object(m.a)({},n,a)}))},t.handleChangeDisplayNameExpandedToggle=function(e,n){t.setState((function(){return{isChangeDisplayNameExpanded:n}}))},t.handleChangeDisplayNameSubmit=function(e){e.preventDefault(),t.props.user.updateProfile({displayName:t.state.newUsername}).then((function(){t.setState((function(){return{newUsername:"",isChangeDisplayNameExpanded:!1}}),(function(){t.props.handleSnackbarOpen("Username Updated.")}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.handleChangeEmailExpandedToggle=function(e,n){t.setState((function(){return{isChangeEmailExpanded:n}}))},t.handleChangeEmailSubmit=function(e){e.preventDefault();var n=h.auth.EmailAuthProvider.credential(t.props.user.email,t.state.newEmailPassword);t.props.user.reauthenticateWithCredential(n).then((function(){t.props.user.updateEmail(t.state.newEmail).then((function(){t.props.user.sendEmailVerification().then((function(){t.setState((function(){return{newEmail:"",newPassword:"",isChangeEmailExpanded:!1}}),(function(){t.props.handleSnackbarOpen("Email Updated. Verify New Email Address."),window.location.reload()}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.handleChangePasswordExpandedToggle=function(e,n){t.setState((function(){return{isChangePasswordExpanded:n}}))},t.handleChangePasswordSubmit=function(e){if(e.preventDefault(),t.state.newPassword===t.state.newPasswordConfirm){var n=h.auth.EmailAuthProvider.credential(t.props.user.email,t.state.oldPassword);t.props.user.reauthenticateWithCredential(n).then((function(){t.props.user.updatePassword(t.state.newPassword).then((function(){t.setState((function(){return{oldPassword:"",newPassword:"",newPasswordConfirm:"",isChangePasswordExpanded:!1}}),(function(){t.props.handleSnackbarOpen("Password Updated.")}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))}else t.props.handleSnackbarOpen("New Passwords do not match.")},t.handleChangeAdminKeysExpandedToggle=function(e,n){t.setState((function(){return{isChangeAdminKeysExpanded:n}}))},t.handleChangeAdminKeysSubmit=function(e){e.preventDefault(),B.collection("AdminKeys").where("Keys","!=",[]).get().then((function(e){var n=[];e.forEach((function(e){return n.push(e.ref)})),n[0]?n[0].update({Keys:t.state.newAdminKey}).then((function(){t.setState((function(){return{newAdminKey:"",isChangeAdminKeysExpanded:!1}}),(function(){t.props.handleSnackbarOpen("Updated AdminKey.")}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)})):t.props.handleSnackbarOpen("Error while fetching AdminKey.")})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.handleDeleteAccountExpandedToggle=function(e,n){t.setState((function(){return{isDeleteAccountExpanded:n}}))},t.handleDeleteAccountSubmit=function(e){e.preventDefault();var n=h.auth.EmailAuthProvider.credential(t.props.user.email,t.state.deletePassword);t.props.user.reauthenticateWithCredential(n).then((function(){B.collection("Users").doc(t.props.user.uid).delete().then((function(){t.props.user.delete().catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))})).catch((function(e){t.props.handleSnackbarOpen(e.message)}))},t.render=function(){return Object(S.jsxs)("div",{className:"Profile",children:[Object(S.jsx)("div",{className:"Profile-BackButtonContainer",children:Object(S.jsx)(f.a,{onClick:t.handleChangeFocus,children:"Back to Library"})}),Object(S.jsxs)("div",{children:[Object(S.jsxs)(U.a,{expanded:t.state.isChangeDisplayNameExpanded,onChange:t.handleChangeDisplayNameExpandedToggle,children:[Object(S.jsxs)(L.a,{expandIcon:t.state.isChangeDisplayNameExpanded?Object(S.jsx)(C.a,{}):Object(S.jsx)(R.a,{}),children:[Object(S.jsx)(A.a,{children:"Username"}),Object(S.jsx)(A.a,{children:t.props.user.displayName})]}),Object(S.jsx)(T.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleChangeDisplayNameSubmit,children:[Object(S.jsx)(j.a,{label:"New Username",name:"newUsername",value:t.state.newUsername,onChange:t.handleInputChange,required:!0}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})})]}),Object(S.jsxs)(U.a,{expanded:t.state.isChangeEmailExpanded,onChange:t.handleChangeEmailExpandedToggle,children:[Object(S.jsxs)(L.a,{expandIcon:t.state.isChangeEmailExpanded?Object(S.jsx)(C.a,{}):Object(S.jsx)(R.a,{}),children:[Object(S.jsx)(A.a,{children:"Email"}),Object(S.jsx)(A.a,{children:t.props.user.email})]}),Object(S.jsx)(T.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleChangeEmailSubmit,children:[Object(S.jsx)(j.a,{label:"New Email",name:"newEmail",value:t.state.newEmail,onChange:t.handleInputChange,required:!0}),Object(S.jsx)(j.a,{label:"Password",name:"newEmailPassword",value:t.state.newEmailPassword,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})})]}),Object(S.jsxs)(U.a,{expanded:t.state.isChangePasswordExpanded,onChange:t.handleChangePasswordExpandedToggle,children:[Object(S.jsx)(L.a,{expandIcon:t.state.isChangePasswordExpanded?Object(S.jsx)(C.a,{}):Object(S.jsx)(R.a,{}),children:Object(S.jsx)(A.a,{children:"Password"})}),Object(S.jsx)(T.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleChangePasswordSubmit,children:[Object(S.jsx)(j.a,{label:"Current Password",name:"oldPassword",value:t.state.oldPassword,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(j.a,{label:"New Password",name:"newPassword",value:t.state.newPassword,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(j.a,{label:"Confirm New Password",name:"newPasswordConfirm",value:t.state.newPasswordConfirm,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})})]}),t.props.userIsAdmin?Object(S.jsxs)(U.a,{expanded:t.state.isChangeAdminKeysExpanded,onChange:t.handleChangeAdminKeysExpandedToggle,children:[Object(S.jsxs)(L.a,{expandIcon:t.state.isChangeAdminKeysExpanded?Object(S.jsx)(C.a,{}):Object(S.jsx)(R.a,{}),children:[Object(S.jsx)(A.a,{children:"Admin Key"}),Object(S.jsx)(A.a,{children:t.state.adminKey})]}),Object(S.jsx)(T.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleChangeAdminKeysSubmit,children:[Object(S.jsx)(j.a,{label:"New Admin Key",name:"newAdminKey",value:t.state.newAdminKey,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})})]}):null,Object(S.jsxs)(U.a,{expanded:t.state.isDeleteAccountExpanded,onChange:t.handleDeleteAccountExpandedToggle,children:[Object(S.jsx)(L.a,{expandIcon:Object(S.jsx)(W.a,{}),children:Object(S.jsx)(A.a,{children:"Delete Account"})}),Object(S.jsx)(T.a,{children:Object(S.jsxs)("form",{className:"Profile-AccordionForm",onSubmit:t.handleDeleteAccountSubmit,children:[Object(S.jsx)(j.a,{label:"Password",name:"deletePassword",value:t.state.deletePassword,onChange:t.handleInputChange,type:"password",required:!0}),Object(S.jsx)(f.a,{type:"submit",color:"secondary",children:"Delete Account"})]})})]})]})]})},t.state={isChangeDisplayNameExpanded:!1,newUsername:"",isChangeEmailExpanded:!1,newEmail:"",newEmailPassword:"",isChangePasswordExpanded:!1,oldPassword:"",newPassword:"",newPasswordConfirm:"",isChangeAdminKeysExpanded:!1,newAdminKey:"",isDeleteAccountExpanded:!1,deletePassword:"",adminKey:""},t}return a}(t.Component),H=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(e=n.call.apply(n,[this].concat(s))).render=function(){return Object(S.jsx)("div",{className:"Library",children:Object(S.jsx)("h1",{children:"Library"})})},e}return a}(t.Component),J=(a(108),function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).handleLogout=function(){h.auth().signOut()},t.handleSnackbarOpen=function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e}}))},t.handleSnackbarClose=function(){t.setState((function(){return{isSnackbarOpen:!1,snackbarMessage:""}}))},t.handleChangeFocus=function(e){t.setState((function(){return{componentInFocus:e}}))},t.render=function(){return Object(S.jsxs)("div",{className:"Homepage",children:[Object(S.jsx)(D,{user:t.props.user,userIsAdmin:t.props.userIsAdmin,handleSnackbarOpen:t.handleSnackbarOpen,handleLogout:t.handleLogout,handleChangeFocus:t.handleChangeFocus}),"Library"===t.state.componentInFocus&&Object(S.jsx)(H,{}),"Profile"===t.state.componentInFocus&&Object(S.jsx)(z,{handleChangeFocus:t.handleChangeFocus,user:t.props.user,userIsAdmin:t.props.userIsAdmin,handleSnackbarOpen:t.handleSnackbarOpen}),Object(S.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.state.isSnackbarOpen,autoHideDuration:6e3,onClose:t.handleSnackbarClose,message:t.state.snackbarMessage,action:Object(S.jsx)(s.a.Fragment,{children:Object(S.jsx)(x.a,{size:"small","aria-label":"close",color:"inherit",onClick:t.handleSnackbarClose,children:Object(S.jsx)(C.a,{fontSize:"small"})})})})]})},t.state={isSnackbarOpen:!1,snackbarMessage:"",componentInFocus:"Library"},t}return a}(t.Component)),G=(a(109),function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).handleSnackbarClose=function(){t.setState((function(){return{isSnackbarOpen:!1,snackbarMessage:""}}))},t.handleLogout=function(){h.auth().signOut()},t.handleReload=function(){window.location.reload()},t.handleResend=function(){t.props.user.sendEmailVerification().then((function(){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Email Resent to ".concat(t.props.user.email,".")}}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},t.handleEmailChangeToggle=function(){t.setState((function(e){return{isUserChangingEmail:!e.isUserChangingEmail}}))},t.handleInputChange=function(e){var n=e.target.getAttribute("name"),a=e.target.value;t.setState((function(){return Object(m.a)({},n,a)}))},t.handleEmailChangeSubmit=function(e){e.preventDefault();var n=h.auth.EmailAuthProvider.credential(t.props.user.email,t.state.passwordInput);t.props.user.reauthenticateWithCredential(n).then((function(){t.props.user.updateEmail(t.state.newEmailInput).then((function(){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:"Email changed to ".concat(t.state.newEmailInput),isUserChangingEmail:!1,newEmailInput:"",passwordInput:""}}),(function(){t.props.user.reload()}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))})).catch((function(e){t.setState((function(){return{isSnackbarOpen:!0,snackbarMessage:e.message}}))}))},t.render=function(){return Object(S.jsxs)("div",{className:"VerifyEmail",children:[Object(S.jsxs)(A.a,{children:[t.props.user.displayName,", please Verify Email at"," ",t.props.user.email,"."]}),Object(S.jsx)(f.a,{onClick:t.handleResend,children:"Resend Email"}),Object(S.jsx)(f.a,{onClick:t.handleReload,children:"Already Verified?"}),Object(S.jsx)(f.a,{onClick:t.handleEmailChangeToggle,children:"Change Email Address"}),t.state.isUserChangingEmail?Object(S.jsx)(p.a,{className:"VerifyEmail-FormContainer",children:Object(S.jsxs)("form",{onSubmit:t.handleEmailChangeSubmit,className:"VerifyEmail-Form",children:[Object(S.jsx)(j.a,{label:"New Email Address",type:"email",required:!0,name:"newEmailInput",value:t.state.newEmailInput,onChange:t.handleInputChange}),Object(S.jsx)(j.a,{label:"Password",type:"password",required:!0,name:"passwordInput",value:t.state.passwordInput,onChange:t.handleInputChange}),Object(S.jsx)(f.a,{type:"submit",children:"Submit"})]})}):null,Object(S.jsx)(f.a,{color:"secondary",onClick:t.handleLogout,children:"Logout"}),Object(S.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.state.isSnackbarOpen,autoHideDuration:6e3,onClose:t.handleSnackbarClose,message:t.state.snackbarMessage,action:Object(S.jsx)(s.a.Fragment,{children:Object(S.jsx)(x.a,{size:"small","aria-label":"close",color:"inherit",onClick:t.handleSnackbarClose,children:Object(S.jsx)(C.a,{fontSize:"small"})})})})]})},t.state={isSnackbarOpen:!1,snackbarMessage:"",isUserChangingEmail:!1,newEmailInput:"",passwordInput:""},t}return a}(t.Component)),Y=h.firestore(),$=function(e){Object(o.a)(a,e);var n=Object(l.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).componentDidMount=function(){t.checkLogin()},t.checkLogin=function(){h.auth().onAuthStateChanged((function(e){e?Y.collection("Users").doc(e.uid).get().then((function(n){var a=!!n.data()&&n.data().isAdmin;t.setState((function(){return{user:e,userIsAdmin:a}}))})).catch((function(e){alert(e.message),h.auth().signOut()})):t.setState((function(){return{user:!1}}))}))},t.render=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)(d.d,{children:[Object(S.jsx)(d.b,{exact:!0,path:"/library-management-system/login",children:t.state.user?Object(S.jsx)(d.a,{to:{pathname:"/library-management-system"}}):Object(S.jsx)(k,{})}),Object(S.jsx)(d.b,{exact:!0,path:"/library-management-system",children:t.state.user?t.state.user.emailVerified?Object(S.jsx)(J,{user:t.state.user,userIsAdmin:t.state.userIsAdmin}):Object(S.jsx)(G,{user:t.state.user}):Object(S.jsx)(d.a,{to:{pathname:"/library-management-system/login"}})})]})})},t.state={user:!1,userIsAdmin:!1},t}return a}(t.Component),_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,163)).then((function(n){var a=n.getCLS,t=n.getFID,s=n.getFCP,r=n.getLCP,i=n.getTTFB;a(e),t(e),s(e),r(e),i(e)}))},Z=a(74);i.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(Z.a,{children:Object(S.jsx)($,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/library-management-system",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/library-management-system","/service-worker.js");_?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var t=a.headers.get("content-type");404===a.status||null!=t&&-1===t.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Q(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Q(n,e)}))}}(),X()}},[[111,1,2]]]);
//# sourceMappingURL=main.88b513ae.chunk.js.map